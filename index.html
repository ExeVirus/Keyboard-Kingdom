<!DOCTYPE html>
<html>
<head>
    <script src="https://cdn.jsdelivr.net/npm/phaser@3.70.0/dist/phaser-arcade-physics.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/webfont/1.6.26/webfont.js"></script>
</head>
<body>
    <script>
    export default class WebFontFile extends Phaser.Loader.File
    {
        /**
         * @param {Phaser.Loader.LoaderPlugin} loader
         * @param {string | string[]} fontNames
         * @param {string} [service]
         */
        constructor(loader, fontNames, service = 'google')
        {
            super(loader, {
                type: 'webfont',
                key: fontNames.toString()
            })

            this.fontNames = Array.isArray(fontNames) ? fontNames : [fontNames]
            this.service = service
        }

        load()
        {
            const config = {
                active: () => {
                    this.loader.nextFile(this, true)
                }
            }

            switch (this.service)
            {
                case 'google':
                    config['google'] = {
                        families: this.fontNames
                    }
                    break

                default:
                    throw new Error('Unsupported font service')
            }
            
            WebFontLoader.load(config)
        }
    }
    class Example extends Phaser.Scene
    {
        constructor()
        {
            super('Bungee')
        }

        preload ()
        {
            this.load.setBaseURL('https://exevirus.github.io/Keyboard-Kingdom');
            this.load.addFile(new WebFontFile(this.load, 'Bungee'))
            this.load.image('red', 'keyboard.png');
        }

        create ()
        {
            const particles = this.add.particles(0, 0, 'key', {
                speed: 100,
                scale: { start: 0.1, end: 0 },
                blendMode: 'ADD'
            });

            const logo = this.add.text(400, 300, 'Hello World!', {
			    fontFamily: '"Press Start 2P"',
			    fontSize: '50px'
		    })

            logo.setVelocity(100, 200);
            logo.setBounce(1, 1);
            logo.setCollideWorldBounds(true);

            particles.startFollow(logo);
        }
    }

    const config = {
        type: Phaser.AUTO,
        width: 800,
        height: 600,
        scene: Example,
        physics: {
            default: 'arcade',
            arcade: {
                gravity: { y: 200 }
            }
        }
    };

    const game = new Phaser.Game(config);
    </script>
</body>
</html>